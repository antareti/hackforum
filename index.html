<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Анимация фотографии</title>
<style>
  body { text-align: center; background: #111; color: #fff; font-family: sans-serif; padding: 20px; }
  canvas { border: 1px solid #444; margin-top: 20px; background: #222; }
  input, button { margin: 10px; padding: 10px; font-size: 16px; cursor: pointer; }
</style>
</head>
<body>

<h1>Анимация фотографии</h1>

<input type="file" id="fileInput" accept="image/*">
<br>
<button onclick="startAnimation()">Начать анимацию</button>
<canvas id="canvas" width="400" height="600"></canvas>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
let img = new Image();
let angle = 0;
let animating = false;

// Загрузка изображения
document.getElementById('fileInput').addEventListener('change', function(e){
  const file = e.target.files[0];
  if(!file) return;
  const reader = new FileReader();
  reader.onload = function(event){
    img.src = event.target.result;
    img.onload = () => ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
  }
  reader.readAsDataURL(file);
});

// Анимация
function animate(){
  if(!animating) return;
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Небольшое колебание изображения (имитация дыхания / движения головы)
  const dx = Math.sin(angle) * 5;
  const dy = Math.cos(angle*1.2) * 3;
  const scale = 1 + Math.sin(angle*0.7)*0.02;

  ctx.save();
  ctx.translate(canvas.width/2 + dx, canvas.height/2 + dy);
  ctx.scale(scale, scale);
  ctx.drawImage(img, -canvas.width/2, -canvas.height/2, canvas.width, canvas.height);
  ctx.restore();

  angle += 0.05;
  requestAnimationFrame(animate);
}

function startAnimation(){
  if(!img.src) return alert("Сначала загрузите изображение!");
  if(animating) return;
  animating = true;
  animate();
}
</script>

</body>
</html>
