<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Художественные трансформации</title>
<style>
  body { font-family: sans-serif; text-align: center; background: #111; color: #fff; padding: 20px; }
  canvas { border: 1px solid #444; margin-top: 20px; background: #222; }
  button { margin: 10px; padding: 10px 20px; font-size: 16px; cursor: pointer; }
</style>
</head>
<body>

<h1>Художественные трансформации изображения</h1>
<button onclick="transformImage()">Сгенерировать вариацию</button>
<button onclick="downloadImage()">Скачать</button>
<canvas id="canvas" width="400" height="600"></canvas>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');

// Загрузка изображения
const img = new Image();
img.src = '1a.png'; // изображение в корне сайта
img.onload = () => ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

// Генерация художественной вариации
function transformImage() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Случайный цветовой фильтр
  const rShift = Math.floor(Math.random()*60-30);
  const gShift = Math.floor(Math.random()*60-30);
  const bShift = Math.floor(Math.random()*60-30);

  // Рисуем исходное изображение
  ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

  // Получаем пиксели
  const imageData = ctx.getImageData(0,0,canvas.width,canvas.height);
  const data = imageData.data;

  for(let i=0;i<data.length;i+=4){
    data[i] = Math.min(255, Math.max(0, data[i]+rShift));     // R
    data[i+1] = Math.min(255, Math.max(0, data[i+1]+gShift)); // G
    data[i+2] = Math.min(255, Math.max(0, data[i+2]+bShift)); // B
  }
  ctx.putImageData(imageData,0,0);

  // Добавим мягкий световой блик
  const gradient = ctx.createRadialGradient(
    Math.random()*canvas.width,
    Math.random()*canvas.height/2+50,
    30,
    canvas.width/2,
    canvas.height/2,
    200
  );
  gradient.addColorStop(0,'rgba(255,255,255,0.2)');
  gradient.addColorStop(1,'rgba(255,255,255,0)');
  ctx.fillStyle = gradient;
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // Мягкое размытие (эстетика)
  ctx.globalAlpha = 0.1;
  for(let i=0;i<3;i++){
    ctx.drawImage(canvas, rand(-5,5), rand(-5,5), canvas.width, canvas.height);
  }
  ctx.globalAlpha = 1;
}

function rand(min,max){ return Math.random()*(max-min)+min; }

// Скачать изображение
function downloadImage(){
  const link = document.createElement('a');
  link.download = 'artistic_variation.png';
  link.href = canvas.toDataURL();
  link.click();
}
</script>

</body>
</html>
